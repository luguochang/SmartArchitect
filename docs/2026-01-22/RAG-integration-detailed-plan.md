# RAGçŸ¥è¯†åº“æ·±åº¦é›†æˆæ–¹æ¡ˆ - SmartArchitect AI

## é¡¹ç›®èƒŒæ™¯

**ç›®æ ‡**: å°†RAGçŸ¥è¯†åº“æ·±åº¦é›†æˆåˆ°PPTç”Ÿæˆå’Œæ¼”è®²ç¨¿ç”ŸæˆåŠŸèƒ½ä¸­ï¼Œè¾¾åˆ°ç”Ÿäº§çº§åˆ«çš„ä¸“ä¸šæ•ˆæœã€‚

**å½“å‰çŠ¶æ€åˆ†æ**:
- âœ… RAGæœåŠ¡å·²å®ç°ï¼ˆChromaDB + all-MiniLM-L6-v2 embeddingï¼‰
- âœ… PPT/Slidevå¯¼å‡ºåŠŸèƒ½å·²å®ç°ï¼ˆçº¯æ•°æ®é©±åŠ¨ï¼Œæ— AIå¢å¼ºï¼‰
- âœ… æ¼”è®²ç¨¿ç”Ÿæˆå·²å®ç°ï¼ˆåŸºç¡€AIç”Ÿæˆï¼Œæœªä½¿ç”¨RAGï¼‰
- âŒ RAGä¸å¯¼å‡ºåŠŸèƒ½å®Œå…¨éš”ç¦»ï¼Œæœªé›†æˆ
- âŒ ç”Ÿæˆå†…å®¹ç¼ºä¹é¢†åŸŸçŸ¥è¯†å’Œæœ€ä½³å®è·µ
- âŒ å‰ç«¯ç¼ºå°‘DocumentUploaderç»„ä»¶

**æ ¸å¿ƒç—›ç‚¹**ï¼ˆåŸºäºç”¨æˆ·åé¦ˆï¼‰:
1. **æ¼”è®²ç¨¿è´¨é‡ä¸è¶³**: ä»…é ç®€å•è¾“å…¥æ¡†+AIç”Ÿæˆï¼Œå†…å®¹è¿‡äºç®€å•ï¼Œç¼ºä¹ä¸“ä¸šæ€§
2. **ç¼ºä¹äºŒæ¬¡ç¼–è¾‘èƒ½åŠ›**: ç”Ÿæˆåæ— æ³•æ¶¦è‰²å’Œä¿®æ”¹ï¼Œä¸€æ¬¡æ€§ç”Ÿæˆéš¾ä»¥æ»¡è¶³éœ€æ±‚
3. **promptè®¾è®¡æ¬ ä½³**: éœ€è¦å®šä¹‰æ¼”è®²ç¨¿æ‰€éœ€è¦ç´ ï¼Œçº¦æŸå¤§æ¨¡å‹ç”Ÿæˆé«˜è´¨é‡å†…å®¹
4. **RAGæœªå‘æŒ¥ä½œç”¨**: çŸ¥è¯†åº“ä¸ç”Ÿæˆæµç¨‹éš”ç¦»ï¼Œæ²¡æœ‰ä¸ºå†…å®¹æä¾›ä¸“ä¸šæ”¯æ’‘

**é—®é¢˜æ ¸å¿ƒ**: éœ€è¦ç³»ç»Ÿæ€§çš„æ¼”è®²ç¨¿ç”Ÿæˆæ¡†æ¶ï¼ˆpromptå·¥ç¨‹+RAGå¢å¼º+äºŒæ¬¡ç¼–è¾‘ï¼‰ï¼Œè€Œä¸æ˜¯ç®€å•çš„AIè°ƒç”¨ã€‚

---

## æŠ€æœ¯æ–¹æ¡ˆæ¶æ„

### æ ¸å¿ƒè®¾è®¡ç†å¿µ

åŸºäº2025-2026å¹´å‰æ²¿ç ”ç©¶ï¼ˆPaper2Slides, ChartLlama, RAG-as-ContextèŒƒå¼ï¼‰ï¼Œé‡‡ç”¨**å¤šé˜¶æ®µç”Ÿæˆç®¡é“**ï¼š

```
Stage 1: å†…å®¹è§„åˆ’ (Content Planning)
  â†“ ä½¿ç”¨RAGæ£€ç´¢ç›¸ä¼¼æ¶æ„å’Œæœ€ä½³å®è·µ
Stage 2: æ™ºèƒ½å¸ƒå±€è®¾è®¡ (Layout Design)
  â†“ æ ¹æ®å†…å®¹æ·±åº¦è‡ªé€‚åº”è°ƒæ•´å¹»ç¯ç‰‡ç»“æ„
Stage 3: RAGå¢å¼ºå™è¿° (Narration Enhancement)
  â†“ ä¸ºæ¯å¼ å¹»ç¯ç‰‡æ³¨å…¥é¢†åŸŸçŸ¥è¯†
Stage 4: è§†è§‰å¢å¼º (Visual Enhancement)
  â†“ ç”Ÿæˆå›¾è¡¨ã€å¼•ç”¨æ¥æº
```

---

## å®ç°æ–¹æ¡ˆè¯¦è§£

### æ–¹æ¡ˆ1: å¢å¼ºå‹RAGæœåŠ¡ï¼ˆç®€åŒ–ç‰ˆï¼‰

**æ–‡ä»¶**: `backend/app/services/rag_enhanced.py` (æ–°å»º)

**è®¾è®¡åŸåˆ™**ï¼ˆåŸºäºç”¨æˆ·åé¦ˆï¼‰:
- âœ… å›¾ç›¸ä¼¼åº¦ä½¿ç”¨**ç®€åŒ–ç‰ˆæœ¬**ï¼ˆèŠ‚ç‚¹ç±»å‹ç»Ÿè®¡+è¾¹å¯†åº¦ï¼Œæ— éœ€å¤æ‚å›¾åµŒå…¥ï¼‰
- âœ… ä¿æŒ**å¤šproviderçµæ´»åˆ‡æ¢**æ¶æ„
- âœ… å¿«é€Ÿå®ç°ï¼Œå¹³è¡¡æ•ˆæœä¸å·¥æœŸ

**æ ¸å¿ƒèƒ½åŠ›**:

1. **æ··åˆæ£€ç´¢ç­–ç•¥** (Hybrid Retrieval - ç®€åŒ–ç‰ˆ)
   - è¯­ä¹‰æœç´¢ï¼ˆç°æœ‰èƒ½åŠ›ï¼‰
   - **ç®€åŒ–çš„ç»“æ„ç›¸ä¼¼åº¦**ï¼ˆæ–°å¢ï¼‰ï¼šåŸºäºç»Ÿè®¡ç‰¹å¾ï¼Œä¸ç”¨å›¾åµŒå…¥æ¨¡å‹
   - å…ƒæ•°æ®è¿‡æ»¤ï¼ˆæ–°å¢ï¼‰ï¼šæŒ‰æŠ€æœ¯æ ˆã€å¤æ‚åº¦ã€é¢†åŸŸåˆ†ç±»

2. **æ™ºèƒ½ä¸Šä¸‹æ–‡æ„å»º**
   ```python
   class EnhancedRAGService:
       async def hybrid_search(
           query: str,
           current_diagram: Optional[Dict],  # å½“å‰ç”»å¸ƒçš„nodes+edges
           filters: Optional[Dict],
           top_k: int = 5
       ) -> EnhancedSearchResult:
           # 1. è¯­ä¹‰æœç´¢
           text_results = await self.semantic_search(query, top_k * 2)

           # 2. ç®€åŒ–çš„å›¾ç»“æ„ç›¸ä¼¼åº¦ï¼ˆå¦‚æœæœ‰å½“å‰æ¶æ„å›¾ï¼‰
           if current_diagram:
               structure_results = await self.simple_graph_similarity_search(
                   current_diagram, top_k
               )

           # 3. Rerankingï¼ˆä½¿ç”¨cross-encoderæå‡å‡†ç¡®åº¦ï¼‰
           reranker = CrossEncoder("cross-encoder/ms-marco-MiniLM-L-6-v2")
           final = self.rerank(query, text_results, structure_results, reranker)

           return EnhancedSearchResult(
               chunks=final,
               relevance_scores=[...],
               suggested_patterns=["microservices", "event-driven"],  # è‡ªåŠ¨æ£€æµ‹æ¨¡å¼
               diagram_matches=[...]  # åŒ¹é…åˆ°çš„ç›¸ä¼¼æ¶æ„
           )
   ```

3. **ç®€åŒ–çš„å›¾ç‰¹å¾æå–**ï¼ˆèŠ‚çœ50%å·¥æœŸï¼Œä¿ç•™80%æ•ˆæœï¼‰
   ```python
   def extract_simple_graph_features(diagram: Dict) -> SimpleGraphFeatures:
       """
       ä½¿ç”¨ç®€å•ç»Ÿè®¡ç‰¹å¾ï¼Œæ— éœ€å¤æ‚å›¾åµŒå…¥
       """
       nodes = diagram["nodes"]
       edges = diagram["edges"]

       # èŠ‚ç‚¹ç±»å‹åˆ†å¸ƒï¼ˆæ ¸å¿ƒç‰¹å¾ï¼‰
       node_type_counts = Counter([n["type"] for n in nodes])

       # è¾¹å¯†åº¦ï¼ˆè¿æ¥ç´§å¯†åº¦ï¼‰
       max_edges = len(nodes) * (len(nodes) - 1)
       edge_density = len(edges) / max_edges if max_edges > 0 else 0

       # å¹³å‡å‡ºå…¥åº¦
       in_degree = Counter([e["target"] for e in edges])
       out_degree = Counter([e["source"] for e in edges])
       avg_degree = (sum(in_degree.values()) + sum(out_degree.values())) / (2 * len(nodes))

       # æ‹“æ‰‘åˆ†ç±»ï¼ˆç®€å•è§„åˆ™ï¼‰
       topology = classify_topology_simple(node_type_counts, edge_density)

       return SimpleGraphFeatures(
           node_type_vector=dict(node_type_counts),  # {"api": 3, "database": 2}
           edge_density=edge_density,
           avg_degree=avg_degree,
           topology=topology,  # "layered" | "mesh" | "hub-spoke"
           component_count=len(nodes)
       )

   def calculate_similarity(feat1: SimpleGraphFeatures, feat2: SimpleGraphFeatures) -> float:
       """
       ä½™å¼¦ç›¸ä¼¼åº¦è®¡ç®—ï¼ˆæ— éœ€æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼‰
       """
       # èŠ‚ç‚¹ç±»å‹å‘é‡ç›¸ä¼¼åº¦ï¼ˆæƒé‡60%ï¼‰
       type_similarity = cosine_similarity(
           vectorize_node_types(feat1.node_type_vector),
           vectorize_node_types(feat2.node_type_vector)
       )

       # è¾¹å¯†åº¦ç›¸ä¼¼åº¦ï¼ˆæƒé‡20%ï¼‰
       density_similarity = 1 - abs(feat1.edge_density - feat2.edge_density)

       # æ‹“æ‰‘åŒ¹é…ï¼ˆæƒé‡20%ï¼‰
       topology_match = 1.0 if feat1.topology == feat2.topology else 0.3

       return 0.6 * type_similarity + 0.2 * density_similarity + 0.2 * topology_match
   ```

**æŠ€æœ¯ä¾èµ–**:
- âœ… æ— éœ€NetworkXï¼ˆç®€åŒ–æ–¹æ¡ˆï¼‰
- âœ… sentence-transformersï¼ˆä»…ç”¨äºcross-encoder rerankingï¼‰
- âœ… ç°æœ‰ChromaDB
- âœ… æ ‡å‡†Pythonåº“ï¼ˆCounter, mathï¼‰

---

### æ–¹æ¡ˆ2: RAGé©±åŠ¨çš„PPTç”Ÿæˆ

**æ–‡ä»¶**: `backend/app/services/ppt_exporter_rag.py` (æ–°å»º)

**ç”Ÿæˆæµç¨‹**:

#### Stage 1: å†…å®¹è§„åˆ’
```python
async def plan_slide_content(nodes, edges, options):
    # æŸ¥è¯¢RAGè·å–ç›¸ä¼¼æ¶æ„
    rag_context = await rag.hybrid_search(
        query=f"Architecture: {summarize(nodes, edges)}",
        current_diagram={"nodes": nodes, "edges": edges},
        filters={"doc_type": "architecture"},
        top_k=5
    )

    # AIç”Ÿæˆå¹»ç¯ç‰‡å¤§çº²
    prompt = f"""
    ä½ æ˜¯æŠ€æœ¯æ¼”ç¤ºä¸“å®¶ï¼Œä¸ºè¿™ä¸ªæ¶æ„ç”Ÿæˆå¹»ç¯ç‰‡å¤§çº²ã€‚

    å½“å‰æ¶æ„: {format_architecture(nodes, edges)}

    ç›¸å…³å…¬å¸æ–‡æ¡£çŸ¥è¯†:
    {format_rag_context(rag_context)}

    è¦æ±‚:
    - æ—¶é•¿: {options.duration} ({get_slide_count(options.duration)}å¼ å¹»ç¯ç‰‡)
    - å—ä¼—: {options.audience}
    - æŠ€æœ¯æ·±åº¦: {options.technical_depth}

    ç”ŸæˆJSONæ ¼å¼å¤§çº²...
    """

    return ContentPlan.parse_obj(await ai.generate(prompt))
```

#### Stage 2: RAGå¢å¼ºå™è¿°

ä¸ºæ¯å¼ å¹»ç¯ç‰‡æ³¨å…¥é¢†åŸŸçŸ¥è¯†ï¼š

```python
async def enhance_with_rag(slides, nodes, edges):
    for slide in slides:
        if slide.type == "component_detail":
            # ä¸ºç»„ä»¶è·å–æœ€ä½³å®è·µ
            for node in slide.featured_nodes:
                rag_results = await rag.hybrid_search(
                    query=f"{node.type} best practices: {node.data.label}",
                    filters={"tech_stack": node.type},
                    top_k=3
                )

                # ç”Ÿæˆç»„ä»¶è¯´æ˜ï¼ˆå«RAGä¸Šä¸‹æ–‡ï¼‰
                explanation = await generate_component_explanation(node, rag_results)

                slide.add_speaker_note(explanation.purpose)
                slide.add_best_practices_section(rag_results.suggested_patterns)

        elif slide.type == "flow_analysis":
            # åˆ†ææ•°æ®æµï¼ˆå«RAGä¸Šä¸‹æ–‡ï¼‰
            flow_path = extract_flow_path(edges, slide.featured_edges)

            rag_results = await rag.hybrid_search(
                query=f"Data flow patterns: {flow_path.description}",
                current_diagram={"nodes": nodes, "edges": edges},
                top_k=5
            )

            flow_analysis = await analyze_flow_with_context(flow_path, rag_results)
            slide.add_analysis_text(flow_analysis)

    return slides
```

#### Stage 3: è§†è§‰å¢å¼º

```python
async def add_visual_enhancements(slides):
    prs = Presentation()

    for slide_data in slides:
        slide = prs.slides.add_slide(get_layout(slide_data.type))

        # æ·»åŠ æ ‡é¢˜å’Œå†…å®¹
        slide.shapes.title.text = slide_data.title

        # æ·»åŠ æ¼”è®²è€…æ³¨é‡Šï¼ˆRAGå¢å¼ºï¼‰
        slide.notes_slide.notes_text_frame.text = slide_data.speaker_notes

        # æ·»åŠ æ¥æºå¼•ç”¨ï¼ˆé¡µè„šï¼‰
        add_source_attribution(slide, slide_data.rag_sources)

    return prs.save_to_bytes()
```

**å¹»ç¯ç‰‡ç»“æ„**:
1. æ ‡é¢˜é¡µ
2. æ¶æ„æ¦‚è§ˆï¼ˆå«ç»Ÿè®¡æ•°æ®ï¼‰
3. æ ¸å¿ƒç»„ä»¶è¯¦è§£ï¼ˆæ¯ä¸ªç»„ä»¶1é¡µï¼Œå«RAGæœ€ä½³å®è·µï¼‰
4. æ•°æ®æµåˆ†æï¼ˆå«ç›¸ä¼¼æ¡ˆä¾‹å‚è€ƒï¼‰
5. æ½œåœ¨é—®é¢˜ä¸ä¼˜åŒ–å»ºè®®ï¼ˆåŸºäºRAGçŸ¥è¯†åº“ï¼‰
6. æ€»ç»“ä¸ä¸‹ä¸€æ­¥

**APIç«¯ç‚¹**:
```
POST /api/export/ppt-enhanced
Body: {
  nodes, edges, mermaid_code, title,
  rag_options: {
    audience: "executive" | "technical" | "mixed",
    technical_depth: 1-10,
    focus_areas: ["scalability", "security"],
    include_best_practices: true
  }
}
Response: Binary .pptx file
```

---

### æ–¹æ¡ˆ3: ä¸“ä¸šæ¼”è®²ç¨¿ç”Ÿæˆç³»ç»Ÿï¼ˆæ ¸å¿ƒé‡ç‚¹ï¼‰

**æ–‡ä»¶**: `backend/app/services/speech_script_rag.py` (æ–°å»º)

**è®¾è®¡ç†å¿µ**ï¼ˆåŸºäº2025-2026æœ€ä½³å®è·µï¼‰:
- é‡‡ç”¨ **CO-STARæ¡†æ¶**ï¼ˆContext, Objective, Style, Tone, Audience, Responseï¼‰
- **Role-based prompting**ï¼ˆå‘Šè¯‰AIå¦‚ä½•æ€è€ƒï¼‰
- **æ¼”è®²ç¨¿è¦ç´ çº¦æŸ**ï¼ˆå®šä¹‰å¿…éœ€å…ƒç´ ï¼Œæå‡ä¸“ä¸šæ€§ï¼‰
- **RAGå¢å¼º**ï¼ˆæ³¨å…¥é¢†åŸŸçŸ¥è¯†å’Œæ¡ˆä¾‹ï¼‰
- **äºŒæ¬¡ç¼–è¾‘æ”¯æŒ**ï¼ˆä¿å­˜è‰ç¨¿ï¼Œæ”¯æŒæ¶¦è‰²ï¼‰

**æ ¸å¿ƒåˆ›æ–°**:
1. Server-Sent Events (SSE) å®æ—¶æµå¼ä¼ è¾“
2. ä¸“ä¸šPromptæ¨¡æ¿ç³»ç»Ÿ
3. äºŒæ¬¡ç¼–è¾‘å’Œç‰ˆæœ¬ç®¡ç†

```python
async def generate_speech_script_stream(nodes, edges, duration, options):
    # Phase 1: RAGä¸Šä¸‹æ–‡æ£€ç´¢
    yield StreamEvent(type="CONTEXT_SEARCH", data={"status": "æœç´¢çŸ¥è¯†åº“..."})

    rag_context = await rag.hybrid_search(
        query=build_context_query(nodes, edges, duration),
        current_diagram={"nodes": nodes, "edges": edges},
        top_k=10
    )

    yield StreamEvent(
        type="CONTEXT_FOUND",
        data={
            "chunks_found": len(rag_context.chunks),
            "patterns": rag_context.suggested_patterns,
            "sources": [c.metadata.filename for c in rag_context.chunks]
        }
    )

    # Phase 2: æ„å»ºå¢å¼ºæç¤ºè¯
    prompt = build_script_prompt(nodes, edges, duration, rag_context, options)

    # Phase 3: æµå¼ç”Ÿæˆ
    yield StreamEvent(type="GENERATION_START", data={})

    accumulated = ""
    async for token in ai.generate_with_stream(prompt):
        accumulated += token
        yield StreamEvent(type="TOKEN", data={"token": token})

    # Phase 4: åå¤„ç†
    final_script = post_process(accumulated, duration)

    yield StreamEvent(
        type="COMPLETE",
        data={
            "script": final_script,
            "word_count": len(final_script.split()),
            "rag_sources": [c.metadata.filename for c in rag_context.chunks]
        }
    )
```

**ä¸“ä¸šPromptæ¨¡æ¿ç³»ç»Ÿ**ï¼ˆåŸºäºCO-STARæ¡†æ¶å’Œ2025æœ€ä½³å®è·µï¼‰:

```python
class ProfessionalPromptBuilder:
    """
    ä¸“ä¸šæ¼”è®²ç¨¿Promptæ„å»ºå™¨
    åŸºäºCO-STARæ¡†æ¶ + Role-based prompting + æ¼”è®²ç¨¿è¦ç´ çº¦æŸ

    å‚è€ƒ: https://www.lakera.ai/blog/prompt-engineering-guide
           https://www.ibm.com/think/prompt-engineering
    """

    def build_script_prompt(
        self,
        nodes: List[Node],
        edges: List[Edge],
        duration: str,
        rag_context: EnhancedSearchResult,
        options: ScriptOptions
    ) -> str:
        """
        æ„å»ºçº¦æŸå¼ä¸“ä¸šæ¼”è®²ç¨¿ç”Ÿæˆprompt
        """

        # æ¼”è®²ç¨¿å¿…éœ€è¦ç´ ï¼ˆçº¦æŸå¤§æ¨¡å‹ç”Ÿæˆé«˜è´¨é‡å†…å®¹ï¼‰
        duration_specs = {
            "30s": {
                "words": "60-80",
                "structure": "Hook (10s) + Value Proposition (15s) + Call-to-Action (5s)",
                "required_elements": [
                    "å¼€åœºHookï¼ˆç”¨é—®é¢˜æˆ–æ•°æ®å¸å¼•æ³¨æ„ï¼‰",
                    "æ ¸å¿ƒä»·å€¼é™ˆè¿°ï¼ˆ1-2å¥è¯ï¼‰",
                    "å…³é”®æŒ‡æ ‡æˆ–äº®ç‚¹ï¼ˆ1ä¸ªæ•°å­—ï¼‰",
                    "è¡ŒåŠ¨å·å¬"
                ],
                "tone": "ç®€æ´æœ‰åŠ›ï¼Œèšç„¦ä»·å€¼"
            },
            "2min": {
                "words": "280-320",
                "structure": "å¼€åœº(30s) + é—®é¢˜èƒŒæ™¯(30s) + è§£å†³æ–¹æ¡ˆ(45s) + ä»·å€¼è¯æ˜(30s) + ç»“å°¾(15s)",
                "required_elements": [
                    "å¼€åœºæ•…äº‹æˆ–åœºæ™¯ï¼ˆå¼•å‘å…±é¸£ï¼‰",
                    "å½“å‰ç—›ç‚¹/æŒ‘æˆ˜çš„æ¸…æ™°é™ˆè¿°",
                    "æ¶æ„è®¾è®¡çš„3ä¸ªæ ¸å¿ƒäº®ç‚¹",
                    "RAGæ¡ˆä¾‹æ”¯æ’‘ï¼ˆè‡³å°‘1ä¸ªå…·ä½“ä¾‹å­ï¼‰",
                    "é‡åŒ–ä»·å€¼ï¼ˆæ€§èƒ½/æˆæœ¬/å¯é æ€§æŒ‡æ ‡ï¼‰",
                    "ä¸‹ä¸€æ­¥è¡ŒåŠ¨æˆ–å»ºè®®"
                ],
                "tone": "ä¸“ä¸šä½†æ˜“æ‡‚ï¼Œé€»è¾‘æ¸…æ™°"
            },
            "5min": {
                "words": "700-800",
                "structure": "å¼€åœº(1min) + èƒŒæ™¯(1min) + æ¶æ„è®¾è®¡(2min) + é£é™©ä¸å¯¹ç­–(0.5min) + Q&Aå¼•å¯¼(0.5min)",
                "required_elements": [
                    "å¼•äººå…¥èƒœçš„å¼€åœºï¼ˆæ•…äº‹/ç»Ÿè®¡/é—®é¢˜ï¼‰",
                    "ä¸šåŠ¡èƒŒæ™¯å’ŒæŠ€æœ¯æŒ‘æˆ˜",
                    "æ¶æ„è®¾è®¡ç†å¿µå’Œæƒè¡¡å†³ç­–",
                    "æ ¸å¿ƒç»„ä»¶æ·±å…¥è®²è§£ï¼ˆ3-5ä¸ªï¼‰",
                    "æ•°æ®æµå’Œå…³é”®è·¯å¾„åˆ†æ",
                    "RAGæœ€ä½³å®è·µå¼•ç”¨ï¼ˆè‡³å°‘2ä¸ªï¼‰",
                    "ç›¸ä¼¼æ¡ˆä¾‹å¯¹æ¯”ï¼ˆä»RAGè·å–ï¼‰",
                    "å·²çŸ¥é£é™©å’Œç¼“è§£æªæ–½",
                    "æ€§èƒ½/æˆæœ¬/æ‰©å±•æ€§åˆ†æ",
                    "æœªæ¥æ¼”è¿›æ–¹å‘",
                    "å¼€æ”¾å¼é—®é¢˜å¼•å¯¼è®¨è®º"
                ],
                "tone": "æ·±å…¥æµ…å‡ºï¼Œå…¼é¡¾å¹¿åº¦ä¸æ·±åº¦"
            }
        }

        spec = duration_specs[duration]

        # === CO-STARæ¡†æ¶æ„å»º ===

        # C - Context (ä¸Šä¸‹æ–‡)
        context_section = f"""
## ğŸ“‹ CONTEXT (ä¸Šä¸‹æ–‡èƒŒæ™¯)

### å½“å‰æ¶æ„æ¦‚è§ˆ
{self._format_architecture_detailed(nodes, edges)}

### çŸ¥è¯†åº“æ£€ç´¢ç»“æœï¼ˆå…¬å¸æœ€ä½³å®è·µï¼‰
{self._format_rag_context_structured(rag_context)}

### æ£€æµ‹åˆ°çš„æ¶æ„æ¨¡å¼
- ä¸»è¦æ¨¡å¼: {', '.join(rag_context.suggested_patterns[:3])}
- æŠ€æœ¯æ ˆ: {self._extract_tech_stack(nodes)}
- å¤æ‚åº¦: {self._assess_complexity(nodes, edges)}
"""

        # O - Objective (ç›®æ ‡)
        objective_section = f"""
## ğŸ¯ OBJECTIVE (ç”Ÿæˆç›®æ ‡)

ä½ çš„ä»»åŠ¡æ˜¯ä¸ºè¿™ä¸ªæŠ€æœ¯æ¶æ„ç”Ÿæˆä¸€ä»½**ä¸“ä¸šã€æœ‰æ·±åº¦ã€æœ‰è¯´æœåŠ›**çš„{duration}æ¼”è®²ç¨¿ã€‚

ç›®æ ‡å—ä¼—: {options.audience}
- å¦‚æœæ˜¯é«˜ç®¡: å¼ºè°ƒå•†ä¸šä»·å€¼ã€ROIã€é£é™©æ§åˆ¶
- å¦‚æœæ˜¯æŠ€æœ¯å›¢é˜Ÿ: æ·±å…¥æŠ€æœ¯ç»†èŠ‚ã€è®¾è®¡æƒè¡¡ã€æœ€ä½³å®è·µ
- å¦‚æœæ˜¯æ··åˆå—ä¼—: åˆ†å±‚è¡¨è¾¾ï¼Œå…ˆè®²ä»·å€¼å†è®²å®ç°

é‡ç‚¹å…³æ³¨: {', '.join(options.focus_areas)}
"""

        # S - Style (é£æ ¼)
        style_section = f"""
## ğŸ¨ STYLE (æ¼”è®²é£æ ¼)

å†™ä½œé£æ ¼è¦æ±‚:
1. ä½¿ç”¨**è®²æ•…äº‹**çš„æ–¹å¼ï¼Œä¸è¦å¹²å·´å·´çš„åˆ—ä¸¾
2. å¤šç”¨**ç±»æ¯”å’Œæ¯”å–»**è®©å¤æ‚æ¦‚å¿µæ˜“æ‡‚ï¼ˆå¦‚ï¼š"APIç½‘å…³å°±åƒæœºåœºå®‰æ£€"ï¼‰
3. **æ•°æ®é©±åŠ¨**: å¼•ç”¨å…·ä½“æ•°å­—ã€ç™¾åˆ†æ¯”ã€å¯¹æ¯”ï¼ˆä»RAGä¸Šä¸‹æ–‡è·å–ï¼‰
4. **é—®é¢˜å¯¼å‘**: å…ˆæå‡ºé—®é¢˜ï¼Œå†å±•ç¤ºè§£å†³æ–¹æ¡ˆ
5. **èŠ‚å¥æ§åˆ¶**: {spec['structure']}

å‚è€ƒä¼˜ç§€æŠ€æœ¯æ¼”è®²:
- Martin Fowlerçš„æ¶æ„æ¼”è®²ï¼ˆæ¸…æ™°çš„å±‚æ¬¡ç»“æ„ï¼‰
- Simon Sinekçš„TEDæ¼”è®²ï¼ˆä»Whyå¼€å§‹ï¼‰
- Amazon CTO Werner Vogelsçš„æŠ€æœ¯åˆ†äº«ï¼ˆæ¡ˆä¾‹ä¸°å¯Œï¼‰
"""

        # T - Tone (è¯­æ°”)
        tone_section = f"""
## ğŸ—£ï¸ TONE (è¯­æ°”åŸºè°ƒ)

è¯­æ°”è®¾å®š: {options.tone} + {spec['tone']}

å…·ä½“è¦æ±‚:
- âœ… è‡ªä¿¡ä½†ä¸å‚²æ…¢: "æˆ‘ä»¬çš„æ¶æ„..."ï¼ˆä¸æ˜¯"æˆ‘è§‰å¾—..."ï¼‰
- âœ… ä¸“ä¸šä½†ä¸æ™¦æ¶©: é¿å…è¿‡åº¦ä½¿ç”¨è¡Œè¯ï¼Œå¿…è¦æ—¶è§£é‡Šæœ¯è¯­
- âœ… è¯šå®ä¸”é€æ˜: æ‰¿è®¤trade-offså’Œå·²çŸ¥é™åˆ¶
- âœ… ç§¯æä¸”å»ºè®¾æ€§: å³ä½¿è®¨è®ºé—®é¢˜ï¼Œä¹Ÿè¦ç»™å‡ºè§£å†³è·¯å¾„
- âŒ é¿å…ç©ºæ´è¡¨è¿°: "éå¸¸å¥½"ã€"å¾ˆå¼ºå¤§"ç­‰æ— å®è´¨å†…å®¹çš„ä¿®é¥°
"""

        # A - Audience (å—ä¼—)
        audience_section = f"""
## ğŸ‘¥ AUDIENCE (å—ä¼—åˆ†æ)

å—ä¼—ç±»å‹: {options.audience}

å—ä¼—æœŸå¾…:
- ä»–ä»¬æƒ³çŸ¥é“: è¿™ä¸ªæ¶æ„èƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ
- ä»–ä»¬å…³å¿ƒçš„: {self._get_audience_concerns(options.audience)}
- ä»–ä»¬çš„èƒŒæ™¯: {self._get_audience_background(options.audience)}

è°ƒæ•´ç­–ç•¥:
- æŠ€æœ¯æ·±åº¦: {self._get_technical_depth(options.audience)}
- æœ¯è¯­ä½¿ç”¨: {self._get_terminology_guidance(options.audience)}
- ä¸¾ä¾‹æ–¹å¼: {self._get_example_style(options.audience)}
"""

        # R - Response Format (å“åº”æ ¼å¼)
        response_format_section = f"""
## ğŸ“ RESPONSE FORMAT (è¾“å‡ºæ ¼å¼)

ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹ç»“æ„è¾“å‡º:

[INTRO]
{self._generate_intro_template(spec)}

[BODY]
{self._generate_body_template(spec, nodes, edges)}

[CONCLUSION]
{self._generate_conclusion_template(spec)}

## âš ï¸ è´¨é‡æ£€æŸ¥æ¸…å•ï¼ˆç”Ÿæˆåè‡ªæŸ¥ï¼‰
{self._generate_quality_checklist(spec)}
"""

        # === æ•´åˆæœ€ç»ˆPrompt ===
        final_prompt = f"""
{context_section}

{objective_section}

{style_section}

{tone_section}

{audience_section}

{response_format_section}

---

## ğŸš€ NOW BEGIN GENERATION

æ—¶é•¿: {duration} (ç›®æ ‡å­—æ•°: {spec['words']}å­—)

å¿…é¡»åŒ…å«çš„è¦ç´ :
{chr(10).join(f"- {elem}" for elem in spec['required_elements'])}

è®°ä½:
1. ä»RAGä¸Šä¸‹æ–‡ä¸­è‡³å°‘å¼•ç”¨2ä¸ªå…·ä½“æ¡ˆä¾‹æˆ–æœ€ä½³å®è·µï¼ˆæ ‡æ³¨æ¥æºï¼‰
2. æ¯ä¸ªæ–­è¨€éƒ½è¦æœ‰æ•°æ®æˆ–æ¡ˆä¾‹æ”¯æ’‘ï¼Œé¿å…ç©ºæ´è¡¨è¿°
3. ä½¿ç”¨è¿‡æ¸¡å¥è®©æ®µè½è¡”æ¥è‡ªç„¶ï¼ˆå¦‚ï¼š"é‚£ä¹ˆï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•å®ç°è¿™ä¸€ç‚¹çš„å‘¢ï¼Ÿ"ï¼‰
4. åœ¨å…³é”®ç‚¹ä½¿ç”¨**é‡å¤å’Œå¼ºè°ƒ**ï¼ˆé‡è¦çš„è¯è¯´ä¸‰éï¼‰
5. ç»“å°¾è¦æœ‰æ˜ç¡®çš„è¡ŒåŠ¨å·å¬æˆ–æ€è€ƒé—®é¢˜

å¼€å§‹ç”Ÿæˆæ¼”è®²ç¨¿:
"""

        return final_prompt

    def _format_architecture_detailed(self, nodes, edges) -> str:
        """è¯¦ç»†æ ¼å¼åŒ–æ¶æ„ä¿¡æ¯"""
        components_by_type = {}
        for node in nodes:
            node_type = node.type or "default"
            if node_type not in components_by_type:
                components_by_type[node_type] = []
            components_by_type[node_type].append(node.data.label)

        arch_summary = f"**ç»„ä»¶æ€»æ•°**: {len(nodes)}\n\n**ç»„ä»¶åˆ†å¸ƒ**:\n"
        for node_type, labels in components_by_type.items():
            arch_summary += f"- {node_type.capitalize()}: {len(labels)}ä¸ª ({', '.join(labels[:3])}{'...' if len(labels) > 3 else ''})\n"

        arch_summary += f"\n**è¿æ¥æ€»æ•°**: {len(edges)}\n"
        if edges:
            key_flows = edges[:5]
            arch_summary += "**å…³é”®æ•°æ®æµ**:\n"
            for edge in key_flows:
                label_str = f" ({edge.label})" if edge.label else ""
                arch_summary += f"- {edge.source} â†’ {edge.target}{label_str}\n"

        return arch_summary

    def _generate_intro_template(self, spec) -> str:
        """ç”Ÿæˆå¼€åœºæ¨¡æ¿"""
        if spec['words'].startswith('60'):
            return """
ï¼ˆ30ç§’ç”µæ¢¯æ¼”è®²ï¼‰
- ç”¨1ä¸ªé—®é¢˜æˆ–æ•°æ®å¼€åœºï¼ˆå¸å¼•æ³¨æ„ï¼‰
- 1å¥è¯è¯´æ˜è¿™ä¸ªæ¶æ„è§£å†³ä»€ä¹ˆé—®é¢˜
- 1ä¸ªæ ¸å¿ƒäº®ç‚¹æˆ–æŒ‡æ ‡
- è¡ŒåŠ¨å·å¬
"""
        elif spec['words'].startswith('280'):
            return """
ï¼ˆ2åˆ†é’Ÿå¼€åœº - çº¦60å­—ï¼‰
- è®²ä¸€ä¸ª3-5å¥è¯çš„æ•…äº‹æˆ–åœºæ™¯ï¼ˆå¼•å‘å…±é¸£ï¼‰
- æˆ–è€…ç”¨ä¸€ä¸ªä»¤äººæƒŠè®¶çš„æ•°æ®/äº‹å®å¼€åœº
- å¿«é€Ÿè¿‡æ¸¡åˆ°å½“å‰ç—›ç‚¹
- å¼•å‡ºæ¶æ„è®¾è®¡çš„å¿…è¦æ€§

ç¤ºä¾‹: "æƒ³è±¡ä¸€ä¸‹ï¼Œå½“100ä¸‡ç”¨æˆ·åŒæ—¶æ¶Œå…¥ç³»ç»Ÿï¼Œè€Œä½ çš„æ•°æ®åº“å¼€å§‹æŠ¥è­¦ã€‚è¿™ä¸æ˜¯å‡è®¾ï¼Œè¿™æ˜¯æˆ‘ä»¬å»å¹´åŒ11é‡åˆ°çš„çœŸå®åœºæ™¯ã€‚ä»Šå¤©æˆ‘è¦åˆ†äº«çš„ï¼Œå°±æ˜¯æˆ‘ä»¬å¦‚ä½•ç”¨è¿™å¥—æ¶æ„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚"
"""
        else:
            return """
ï¼ˆ5åˆ†é’Ÿå¼€åœº - çº¦150å­—ï¼‰
- ç”¨æ•…äº‹/ç»Ÿè®¡æ•°æ®/è¡Œä¸šè¶‹åŠ¿å¼€åœºï¼ˆ1-2åˆ†é’Ÿï¼‰
- å»ºç«‹ä¸šåŠ¡èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ¶æ„ï¼Ÿ
- æŠ€æœ¯æŒ‘æˆ˜ï¼šé¢ä¸´å“ªäº›å…·ä½“é—®é¢˜ï¼Ÿ
- ç®€è¦é¢„å‘Šï¼šæˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒæ€è·¯ï¼ˆ3ä¸ªå…³é”®è¯ï¼‰

ç¤ºä¾‹: "2023å¹´ï¼ŒGartneræŠ¥å‘ŠæŒ‡å‡ºï¼Œ75%çš„ä¼ä¸šåœ¨æ•°å­—åŒ–è½¬å‹ä¸­é‡åˆ°æ¶æ„ç“¶é¢ˆã€‚æˆ‘ä»¬å…¬å¸ä¹Ÿä¸ä¾‹å¤–ã€‚å»å¹´ï¼Œæˆ‘ä»¬çš„å•ä½“åº”ç”¨å¼€å§‹å‡ºç°æ€§èƒ½é—®é¢˜ï¼Œå“åº”æ—¶é—´ä»200msé£™å‡åˆ°3ç§’ï¼Œç”¨æˆ·æŠ•è¯‰æ¿€å¢ã€‚ç»è¿‡6ä¸ªæœˆçš„æ¶æ„é‡æ„ï¼Œæˆ‘ä»¬ä¸ä»…è§£å†³äº†æ€§èƒ½é—®é¢˜ï¼Œè¿˜å°†éƒ¨ç½²é¢‘ç‡ä»æ¯æœˆ1æ¬¡æå‡åˆ°æ¯å¤©10æ¬¡ã€‚ä»Šå¤©ï¼Œæˆ‘æƒ³åˆ†äº«è¿™ä¸ªæ¶æ„èƒŒåçš„è®¾è®¡æ€è·¯å’Œå®è·µç»éªŒã€‚"
"""

    def _generate_body_template(self, spec, nodes, edges) -> str:
        """ç”Ÿæˆä¸»ä½“æ¨¡æ¿"""
        if spec['words'].startswith('60'):
            return "ï¼ˆ30ç§’ä¸»ä½“ï¼‰ç›´æ¥è¯´æ ¸å¿ƒä»·å€¼å’Œå…³é”®æŒ‡æ ‡ï¼Œä¸å±•å¼€ç»†èŠ‚"
        elif spec['words'].startswith('280'):
            return """
ï¼ˆ2åˆ†é’Ÿä¸»ä½“ - çº¦200å­—ï¼‰

åˆ†3ä¸ªæ®µè½:

**æ®µè½1: æ¶æ„è®¾è®¡æ ¸å¿ƒæ€è·¯ï¼ˆ60å­—ï¼‰**
- æˆ‘ä»¬é‡‡ç”¨äº†ä»€ä¹ˆæ¶æ„æ¨¡å¼ï¼Ÿï¼ˆä»RAGä¸Šä¸‹æ–‡å¼•ç”¨ï¼‰
- ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªæ–¹æ¡ˆï¼Ÿï¼ˆæƒè¡¡å†³ç­–ï¼‰
- ä¸ä¼ ç»Ÿæ–¹æ¡ˆçš„å¯¹æ¯”

**æ®µè½2: å…³é”®ç»„ä»¶å’Œæ•°æ®æµï¼ˆ80å­—ï¼‰**
- 3ä¸ªæœ€é‡è¦çš„ç»„ä»¶åŠå…¶èŒè´£
- æ ¸å¿ƒæ•°æ®æµè·¯å¾„
- ç”¨ç±»æ¯”è®©éæŠ€æœ¯å—ä¼—ä¹Ÿèƒ½ç†è§£

**æ®µè½3: ä»·å€¼è¯æ˜ï¼ˆ60å­—ï¼‰**
- æ€§èƒ½æå‡: XX%ï¼ˆå…·ä½“æ•°å­—ï¼‰
- æˆæœ¬ä¼˜åŒ–: èŠ‚çœXXï¼ˆå…·ä½“é‡‘é¢ï¼‰
- æˆ–å¼•ç”¨RAGä¸­çš„ç›¸ä¼¼æ¡ˆä¾‹: "è¿™ç§æ¶æ„åœ¨XXå…¬å¸ä¹Ÿå–å¾—äº†ç±»ä¼¼æ•ˆæœ..."
"""
        else:
            return """
ï¼ˆ5åˆ†é’Ÿä¸»ä½“ - çº¦500å­—ï¼‰

åˆ†5ä¸ªæ®µè½:

**æ®µè½1: æ¶æ„è®¾è®¡ç†å¿µï¼ˆ100å­—ï¼‰**
- è®¾è®¡åŸåˆ™ï¼ˆå¦‚ï¼šé«˜å†…èšä½è€¦åˆã€å•ä¸€èŒè´£ï¼‰
- ä¸ºä»€ä¹ˆé€‰æ‹©è¿™äº›åŸåˆ™ï¼Ÿï¼ˆç»“åˆä¸šåŠ¡åœºæ™¯ï¼‰
- ä»RAGå¼•ç”¨ä¸šç•Œæœ€ä½³å®è·µ

**æ®µè½2-4: æ ¸å¿ƒç»„ä»¶æ·±å…¥è®²è§£ï¼ˆæ¯ä¸ªç»„ä»¶80-100å­—ï¼‰**
é€‰æ‹©3-4ä¸ªæœ€é‡è¦çš„ç»„ä»¶:
- ç»„ä»¶çš„èŒè´£å’Œè®¾è®¡è€ƒé‡
- æŠ€æœ¯é€‰å‹çš„æƒè¡¡ï¼ˆä¸ºä»€ä¹ˆç”¨Redisè€Œä¸æ˜¯Memcachedï¼Ÿï¼‰
- æ€§èƒ½æ•°æ®æˆ–å‹æµ‹ç»“æœ
- ä»RAGå¼•ç”¨ç›¸ä¼¼æ¡ˆä¾‹æˆ–åæ¨¡å¼

**æ®µè½5: é£é™©ä¸å¯¹ç­–ï¼ˆ100å­—ï¼‰**
- å·²çŸ¥çš„æŠ€æœ¯é£é™©ï¼ˆä¸è¦å›é¿ï¼‰
- ç¼“è§£æªæ–½å’Œå¤‡é€‰æ–¹æ¡ˆ
- ç›‘æ§å’Œå‘Šè­¦ç­–ç•¥

**æ®µè½6: ä»·å€¼æ€»ç»“ï¼ˆ100å­—ï¼‰**
- é‡åŒ–çš„ä¸šåŠ¡ä»·å€¼
- æŠ€æœ¯å€ºåŠ¡çš„æ”¹å–„
- å›¢é˜Ÿæ•ˆèƒ½æå‡
"""

    def _generate_conclusion_template(self, spec) -> str:
        """ç”Ÿæˆç»“å°¾æ¨¡æ¿"""
        if spec['words'].startswith('60'):
            return "ï¼ˆ10ç§’ç»“å°¾ï¼‰æ¸…æ™°çš„è¡ŒåŠ¨å·å¬: 'Let's discuss' / 'æ¬¢è¿è¯•ç”¨' / 'æˆ‘ä»¬å¯ä»¥å¸®ä½ å®ç°'"
        elif spec['words'].startswith('280'):
            return """
ï¼ˆ2åˆ†é’Ÿç»“å°¾ - çº¦40å­—ï¼‰
- å›é¡¾æ ¸å¿ƒä»·å€¼ï¼ˆ1å¥è¯ï¼‰
- è¡ŒåŠ¨å·å¬æˆ–ä¸‹ä¸€æ­¥å»ºè®®
- ç•™ä¸€ä¸ªå¼€æ”¾å¼é—®é¢˜å¼•å‘æ€è€ƒ

ç¤ºä¾‹: "é€šè¿‡è¿™å¥—æ¶æ„ï¼Œæˆ‘ä»¬ä¸ä»…è§£å†³äº†æ€§èƒ½é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯å»ºç«‹äº†ä¸€ä¸ªå¯æŒç»­æ¼”è¿›çš„æŠ€æœ¯ä½“ç³»ã€‚å¦‚æœä½ ä¹Ÿé¢ä¸´ç±»ä¼¼æŒ‘æˆ˜ï¼Œä¸å¦¨æ€è€ƒä¸€ä¸‹ï¼šä½ çš„æ¶æ„æ˜¯å¦ä¸ºæœªæ¥çš„å¢é•¿é¢„ç•™äº†ç©ºé—´ï¼Ÿ"
"""
        else:
            return """
ï¼ˆ5åˆ†é’Ÿç»“å°¾ - çº¦100å­—ï¼‰
- æ€»ç»“3ä¸ªå…³é”®è¦ç‚¹ï¼ˆå‘¼åº”å¼€åœºï¼‰
- æœªæ¥æ¼”è¿›æ–¹å‘
- æŠ›å‡º2-3ä¸ªæ€è€ƒé—®é¢˜å¼•å¯¼Q&A
- æ„Ÿè°¢å’Œè”ç³»æ–¹å¼

ç¤ºä¾‹: "ä»Šå¤©æˆ‘ä»¬åˆ†äº«äº†ä»å•ä½“åˆ°å¾®æœåŠ¡çš„æ¶æ„æ¼”è¿›ä¹‹è·¯ã€‚æ ¸å¿ƒè¦ç‚¹æœ‰ä¸‰ä¸ªï¼šç¬¬ä¸€ï¼Œæ¸è¿›å¼è¿ç§»æ¯”å¤§çˆ†ç‚¸é‡å†™æ›´å®‰å…¨ï¼›ç¬¬äºŒï¼Œè§‚æµ‹æ€§æ˜¯å¾®æœåŠ¡æ¶æ„çš„ç”Ÿå‘½çº¿ï¼›ç¬¬ä¸‰ï¼Œå›¢é˜Ÿç»„ç»‡è¦ä¸æ¶æ„å¯¹é½ã€‚æœªæ¥ï¼Œæˆ‘ä»¬è®¡åˆ’å¼•å…¥æœåŠ¡ç½‘æ ¼å’Œè¾¹ç¼˜è®¡ç®—èƒ½åŠ›ã€‚æˆ‘æƒ³ç•™å‡ ä¸ªé—®é¢˜ç»™å¤§å®¶ï¼š1) ä½ ä»¬å¦‚ä½•å¤„ç†å¾®æœåŠ¡çš„åˆ†å¸ƒå¼äº‹åŠ¡ï¼Ÿ2) åœ¨ä½ ä»¬çš„åœºæ™¯ä¸­ï¼ŒæœåŠ¡ç²’åº¦å¦‚ä½•åˆ’åˆ†ï¼Ÿæ¬¢è¿ä¼šåäº¤æµã€‚è°¢è°¢å¤§å®¶ï¼"
"""

    def _generate_quality_checklist(self, spec) -> str:
        """ç”Ÿæˆè´¨é‡æ£€æŸ¥æ¸…å•"""
        return f"""
ç”Ÿæˆåè¯·è‡ªæŸ¥:
- [ ] å­—æ•°åœ¨ç›®æ ‡èŒƒå›´å†…ï¼ˆ{spec['words']}å­—ï¼‰
- [ ] æ‰€æœ‰å¿…éœ€è¦ç´ éƒ½åŒ…å«
- [ ] è‡³å°‘å¼•ç”¨äº†2ä¸ªRAGä¸Šä¸‹æ–‡ä¸­çš„æ¡ˆä¾‹/æœ€ä½³å®è·µ
- [ ] æ¯ä¸ªæŠ€æœ¯æ–­è¨€éƒ½æœ‰æ•°æ®æˆ–æ¡ˆä¾‹æ”¯æ’‘
- [ ] æ®µè½ä¹‹é—´æœ‰è‡ªç„¶çš„è¿‡æ¸¡
- [ ] å¼€åœºæœ‰å¸å¼•åŠ›ï¼ˆä¸æ˜¯å¹³é“ºç›´å™ï¼‰
- [ ] ç»“å°¾æœ‰æ˜ç¡®çš„è¡ŒåŠ¨å·å¬æˆ–æ€è€ƒé—®é¢˜
- [ ] é¿å…ä½¿ç”¨"éå¸¸å¥½"ã€"å¾ˆå¼ºå¤§"ç­‰ç©ºæ´è¡¨è¿°
- [ ] æŠ€æœ¯æœ¯è¯­æœ‰å¿…è¦çš„è§£é‡Šï¼ˆå°¤å…¶å¯¹éæŠ€æœ¯å—ä¼—ï¼‰
"""

    def _get_audience_concerns(self, audience: str) -> str:
        """æ ¹æ®å—ä¼—è¿”å›å…³æ³¨ç‚¹"""
        concerns = {
            "executive": "ROIã€ä¸šåŠ¡å½±å“ã€é£é™©æ§åˆ¶ã€ç«äº‰ä¼˜åŠ¿",
            "technical": "æŠ€æœ¯ç»†èŠ‚ã€æ€§èƒ½æŒ‡æ ‡ã€å¯ç»´æŠ¤æ€§ã€æŠ€æœ¯å€ºåŠ¡",
            "mixed": "ä¸šåŠ¡ä»·å€¼ + æŠ€æœ¯äº®ç‚¹çš„å¹³è¡¡"
        }
        return concerns.get(audience, "ä¸šåŠ¡ä»·å€¼å’ŒæŠ€æœ¯å®ç°çš„å¹³è¡¡")

    def _get_technical_depth(self, audience: str) -> str:
        """è¿”å›æŠ€æœ¯æ·±åº¦æŒ‡å¯¼"""
        depth = {
            "executive": "é«˜å±‚æ¬¡ï¼Œå°‘ç”¨æŠ€æœ¯æœ¯è¯­ï¼Œå¤šè®²ä¸šåŠ¡ä»·å€¼",
            "technical": "æ·±å…¥æŠ€æœ¯ç»†èŠ‚ï¼Œå¯ä»¥ä½¿ç”¨ä¸“ä¸šæœ¯è¯­ï¼Œä½†è¦è§£é‡Šè®¾è®¡å†³ç­–",
            "mixed": "åˆ†å±‚è¡¨è¾¾ï¼šå…ˆè®²whatå’Œwhyï¼ˆä¸šåŠ¡ä»·å€¼ï¼‰ï¼Œå†è®²howï¼ˆæŠ€æœ¯å®ç°ï¼‰"
        }
        return depth.get(audience, "ä¸­ç­‰æ·±åº¦ï¼Œå…¼é¡¾ä¸šåŠ¡å’ŒæŠ€æœ¯")
```

**å…³é”®æ”¹è¿›ç‚¹**:
1. âœ… **CO-STARæ¡†æ¶**: æä¾›å®Œæ•´ä¸Šä¸‹æ–‡ã€æ˜ç¡®ç›®æ ‡ã€å®šä¹‰é£æ ¼å’Œè¯­æ°”
2. âœ… **æ¼”è®²ç¨¿è¦ç´ çº¦æŸ**: æ¯ç§æ—¶é•¿éƒ½æœ‰æ˜ç¡®çš„å¿…éœ€è¦ç´ æ¸…å•
3. âœ… **æ¨¡æ¿åŒ–æŒ‡å¯¼**: ä¸ºintro/body/conclusionæä¾›å…·ä½“æ¨¡æ¿å’Œç¤ºä¾‹
4. âœ… **è´¨é‡æ£€æŸ¥æ¸…å•**: è®©AIè‡ªæŸ¥è¾“å‡ºè´¨é‡
5. âœ… **å—ä¼—è‡ªé€‚åº”**: æ ¹æ®å—ä¼—ç±»å‹è°ƒæ•´è¯­æ°”å’Œæ·±åº¦
6. âœ… **RAGå¼ºåˆ¶é›†æˆ**: è¦æ±‚è‡³å°‘å¼•ç”¨2ä¸ªRAGæ¡ˆä¾‹

**äºŒæ¬¡ç¼–è¾‘å’Œç‰ˆæœ¬ç®¡ç†**:

```python
# backend/app/services/script_editor.py (æ–°å»º)

class ScriptEditorService:
    """
    æ¼”è®²ç¨¿äºŒæ¬¡ç¼–è¾‘æœåŠ¡
    æ”¯æŒä¿å­˜è‰ç¨¿ã€ç‰ˆæœ¬ç®¡ç†ã€å±€éƒ¨æ¶¦è‰²
    """

    def __init__(self):
        # ä½¿ç”¨ç®€å•çš„æ–‡ä»¶å­˜å‚¨æˆ–æ•°æ®åº“
        self.storage_dir = Path("./data/scripts")
        self.storage_dir.mkdir(parents=True, exist_ok=True)

    async def save_draft(
        self,
        script_id: str,
        content: ScriptContent,
        metadata: ScriptMetadata
    ) -> SaveDraftResponse:
        """
        ä¿å­˜æ¼”è®²ç¨¿è‰ç¨¿ï¼ˆæ”¯æŒå¢é‡æ›´æ–°ï¼‰
        """
        draft_file = self.storage_dir / f"{script_id}.json"

        draft_data = {
            "id": script_id,
            "content": {
                "intro": content.intro,
                "body": content.body,
                "conclusion": content.conclusion,
                "full_text": content.full_text
            },
            "metadata": {
                "created_at": metadata.created_at or datetime.now().isoformat(),
                "updated_at": datetime.now().isoformat(),
                "duration": metadata.duration,
                "word_count": len(content.full_text.split()),
                "rag_sources": metadata.rag_sources,
                "architecture_snapshot": metadata.architecture_snapshot
            },
            "version": metadata.version + 1
        }

        draft_file.write_text(json.dumps(draft_data, ensure_ascii=False, indent=2))

        return SaveDraftResponse(
            script_id=script_id,
            version=draft_data["version"],
            saved_at=draft_data["metadata"]["updated_at"]
        )

    async def load_draft(self, script_id: str) -> Optional[ScriptDraft]:
        """åŠ è½½æ¼”è®²ç¨¿è‰ç¨¿"""
        draft_file = self.storage_dir / f"{script_id}.json"

        if not draft_file.exists():
            return None

        draft_data = json.loads(draft_file.read_text())
        return ScriptDraft.parse_obj(draft_data)

    async def refine_section(
        self,
        script_id: str,
        section: Literal["intro", "body", "conclusion"],
        user_feedback: str,
        rag_context: Optional[EnhancedSearchResult] = None
    ) -> RefinedSectionResponse:
        """
        å±€éƒ¨æ¶¦è‰²æ¼”è®²ç¨¿æŸä¸ªç« èŠ‚
        ç”¨æˆ·å¯ä»¥æä¾›åé¦ˆï¼ŒAIæ ¹æ®åé¦ˆé‡æ–°ç”Ÿæˆ
        """

        # åŠ è½½å½“å‰è‰ç¨¿
        draft = await self.load_draft(script_id)
        if not draft:
            raise ValueError(f"Script {script_id} not found")

        current_section_text = getattr(draft.content, section)

        # æ„å»ºæ¶¦è‰²prompt
        refine_prompt = f"""
ä½ æ˜¯ä¸“ä¸šçš„æ¼”è®²ç¨¿ç¼–è¾‘ï¼Œè´Ÿè´£æ ¹æ®ç”¨æˆ·åé¦ˆæ”¹è¿›æ¼”è®²ç¨¿çš„æŸä¸ªç« èŠ‚ã€‚

## å½“å‰ç« èŠ‚å†…å®¹ï¼ˆ{section}ï¼‰:
{current_section_text}

## ç”¨æˆ·åé¦ˆ:
{user_feedback}

## æ”¹è¿›è¦æ±‚:
1. ä¿æŒåŸæœ‰çš„æ ¸å¿ƒä¿¡æ¯å’Œç»“æ„
2. æ ¹æ®ç”¨æˆ·åé¦ˆè¿›è¡Œé’ˆå¯¹æ€§è°ƒæ•´
3. ç¡®ä¿æ”¹è¿›åçš„æ–‡å­—æ›´æµç•…ã€æ›´æœ‰è¯´æœåŠ›
4. ä¿æŒå­—æ•°åœ¨Â±20%èŒƒå›´å†…ï¼ˆå½“å‰: {len(current_section_text.split())}å­—ï¼‰

{f"## è¡¥å……çš„RAGä¸Šä¸‹æ–‡:\\n{self._format_rag_context(rag_context)}" if rag_context else ""}

è¯·è¾“å‡ºæ”¹è¿›åçš„ç« èŠ‚å†…å®¹:
"""

        # è°ƒç”¨AIç”Ÿæˆæ¶¦è‰²ç‰ˆæœ¬
        refined_text = await self.ai_service.generate_with_text_prompt(refine_prompt)

        # æ›´æ–°è‰ç¨¿
        setattr(draft.content, section, refined_text)
        draft.content.full_text = self._rebuild_full_text(draft.content)

        await self.save_draft(script_id, draft.content, draft.metadata)

        return RefinedSectionResponse(
            script_id=script_id,
            section=section,
            refined_text=refined_text,
            changes_summary=self._summarize_changes(current_section_text, refined_text)
        )

    async def suggest_improvements(
        self,
        script_id: str,
        focus_areas: List[str] = ["clarity", "engagement", "flow"]
    ) -> ImprovementSuggestions:
        """
        AIåˆ†ææ¼”è®²ç¨¿ï¼Œæä¾›æ”¹è¿›å»ºè®®ï¼ˆä¸ç›´æ¥ä¿®æ”¹ï¼‰
        """

        draft = await self.load_draft(script_id)

        analysis_prompt = f"""
ä½ æ˜¯æ¼”è®²ç¨¿ä¸“ä¸šé¡¾é—®ï¼Œåˆ†æä»¥ä¸‹æ¼”è®²ç¨¿å¹¶æä¾›æ”¹è¿›å»ºè®®ã€‚

{draft.content.full_text}

è¯·ä»ä»¥ä¸‹ç»´åº¦åˆ†æ:
{', '.join(focus_areas)}

è¾“å‡ºJSONæ ¼å¼:
{{
  "overall_score": 7.5,  // 1-10åˆ†
  "strengths": ["...", "..."],
  "weaknesses": ["...", "..."],
  "suggestions": [
    {{
      "section": "intro" | "body" | "conclusion",
      "issue": "å…·ä½“é—®é¢˜æè¿°",
      "suggestion": "æ”¹è¿›å»ºè®®",
      "priority": "high" | "medium" | "low"
    }}
  ]
}}
"""

        analysis_json = await self.ai_service.generate_with_text_prompt(analysis_prompt)
        return ImprovementSuggestions.parse_obj(analysis_json)
```

**å‰ç«¯äºŒæ¬¡ç¼–è¾‘ç»„ä»¶**:

```typescript
// frontend/components/ScriptEditor.tsx (æ–°å»º)

export function ScriptEditor({ scriptId }: { scriptId: string }) {
  const [draft, setDraft] = useState<ScriptDraft | null>(null);
  const [editingSection, setEditingSection] = useState<string | null>(null);
  const [suggestions, setSuggestions] = useState<ImprovementSuggestion[]>([]);

  // åŠ è½½è‰ç¨¿
  useEffect(() => {
    loadDraft(scriptId).then(setDraft);
  }, [scriptId]);

  // ä¿å­˜è‰ç¨¿ï¼ˆè‡ªåŠ¨ä¿å­˜ï¼‰
  const autoSave = useDebounce(async (content: ScriptContent) => {
    await fetch(`/api/export/script/${scriptId}/draft`, {
      method: 'PUT',
      body: JSON.stringify({ content })
    });
    toast.success('è‰ç¨¿å·²è‡ªåŠ¨ä¿å­˜');
  }, 2000);

  // å±€éƒ¨æ¶¦è‰²
  const refineSection = async (section: string, feedback: string) => {
    setRefining(true);

    try {
      const response = await fetch(`/api/export/script/${scriptId}/refine`, {
        method: 'POST',
        body: JSON.stringify({ section, user_feedback: feedback })
      });

      const { refined_text, changes_summary } = await response.json();

      // æ›´æ–°UI
      setDraft(prev => ({
        ...prev,
        content: {
          ...prev.content,
          [section]: refined_text
        }
      }));

      // æ˜¾ç¤ºå˜æ›´æ‘˜è¦
      showChangesModal(changes_summary);
    } finally {
      setRefining(false);
    }
  };

  // è·å–æ”¹è¿›å»ºè®®
  const getSuggestions = async () => {
    const response = await fetch(`/api/export/script/${scriptId}/suggestions`);
    const suggestions = await response.json();
    setSuggestions(suggestions.suggestions);
  };

  return (
    <div className="script-editor">
      {/* å·¦ä¾§ï¼šç¼–è¾‘å™¨ */}
      <div className="editor-panel">
        <div className="section-editor" data-section="intro">
          <h3>å¼€åœº <button onClick={() => setEditingSection('intro')}>æ¶¦è‰²</button></h3>
          <textarea
            value={draft?.content.intro}
            onChange={(e) => {
              setDraft(prev => ({
                ...prev,
                content: { ...prev.content, intro: e.target.value }
              }));
              autoSave(draft.content);
            }}
          />
        </div>

        <div className="section-editor" data-section="body">
          <h3>ä¸»ä½“ <button onClick={() => setEditingSection('body')}>æ¶¦è‰²</button></h3>
          <textarea
            value={draft?.content.body}
            onChange={(e) => {
              setDraft(prev => ({
                ...prev,
                content: { ...prev.content, body: e.target.value }
              }));
              autoSave(draft.content);
            }}
          />
        </div>

        <div className="section-editor" data-section="conclusion">
          <h3>ç»“å°¾ <button onClick={() => setEditingSection('conclusion')}>æ¶¦è‰²</button></h3>
          <textarea
            value={draft?.content.conclusion}
            onChange={(e) => {
              setDraft(prev => ({
                ...prev,
                content: { ...prev.content, conclusion: e.target.value }
              }));
              autoSave(draft.content);
            }}
          />
        </div>
      </div>

      {/* å³ä¾§ï¼šæ”¹è¿›å»ºè®® */}
      <div className="suggestions-panel">
        <button onClick={getSuggestions}>
          <Sparkles className="w-4 h-4" />
          è·å–AIæ”¹è¿›å»ºè®®
        </button>

        {suggestions.length > 0 && (
          <div className="suggestions-list">
            {suggestions.map((sug, idx) => (
              <div key={idx} className={`suggestion priority-${sug.priority}`}>
                <h4>{sug.section}</h4>
                <p className="issue">{sug.issue}</p>
                <p className="suggestion">{sug.suggestion}</p>
                <button onClick={() => applySuggestion(sug)}>åº”ç”¨å»ºè®®</button>
              </div>
            ))}
          </div>
        )}
      </div>

      {/* æ¶¦è‰²å¯¹è¯æ¡† */}
      {editingSection && (
        <RefineDialog
          section={editingSection}
          onRefine={(feedback) => refineSection(editingSection, feedback)}
          onClose={() => setEditingSection(null)}
        />
      )}
    </div>
  );
}

// æ¶¦è‰²å¯¹è¯æ¡†ç»„ä»¶
function RefineDialog({ section, onRefine, onClose }) {
  const [feedback, setFeedback] = useState('');

  return (
    <Modal open onClose={onClose}>
      <div className="refine-dialog">
        <h2>æ¶¦è‰² {section} ç« èŠ‚</h2>

        <label>è¯·æè¿°ä½ å¸Œæœ›å¦‚ä½•æ”¹è¿›è¿™ä¸ªç« èŠ‚:</label>
        <textarea
          placeholder="ä¾‹å¦‚ï¼šå¼€åœºå¤ªå¹³æ·¡ï¼Œå¸Œæœ›æ›´æœ‰å¸å¼•åŠ›ï¼›æˆ–è€…ï¼šä¸»ä½“éƒ¨åˆ†æŠ€æœ¯ç»†èŠ‚å¤ªå¤šï¼Œå¸Œæœ›æ›´é€šä¿—æ˜“æ‡‚"
          value={feedback}
          onChange={(e) => setFeedback(e.target.value)}
          rows={4}
        />

        <div className="quick-suggestions">
          <p>å¿«é€Ÿå»ºè®®:</p>
          <button onClick={() => setFeedback('å¢åŠ å…·ä½“çš„æ•°æ®å’Œæ¡ˆä¾‹ï¼Œè®©å†…å®¹æ›´æœ‰è¯´æœåŠ›')}>
            å¢åŠ æ•°æ®æ”¯æ’‘
          </button>
          <button onClick={() => setFeedback('ä½¿ç”¨æ›´ç”ŸåŠ¨çš„ç±»æ¯”å’Œæ¯”å–»ï¼Œè®©æŠ€æœ¯æ¦‚å¿µæ›´æ˜“æ‡‚')}>
            å¢åŠ ç±»æ¯”
          </button>
          <button onClick={() => setFeedback('è°ƒæ•´è¯­æ°”ï¼Œè®©è¡¨è¾¾æ›´è‡ªä¿¡å’Œä¸“ä¸š')}>
            è°ƒæ•´è¯­æ°”
          </button>
          <button onClick={() => setFeedback('ç®€åŒ–è¡¨è¾¾ï¼Œå»æ‰å†—ä½™å†…å®¹')}>
            ç®€åŒ–è¡¨è¾¾
          </button>
        </div>

        <div className="actions">
          <button onClick={() => onRefine(feedback)} disabled={!feedback}>
            å¼€å§‹æ¶¦è‰²
          </button>
          <button onClick={onClose}>å–æ¶ˆ</button>
        </div>
      </div>
    </Modal>
  );
}
```

**APIç«¯ç‚¹ï¼ˆäºŒæ¬¡ç¼–è¾‘ï¼‰**:
```
PUT /api/export/script/{script_id}/draft
Body: { content: { intro, body, conclusion } }
Response: { script_id, version, saved_at }

POST /api/export/script/{script_id}/refine
Body: { section: "intro"|"body"|"conclusion", user_feedback: "..." }
Response: { script_id, section, refined_text, changes_summary }

GET /api/export/script/{script_id}/suggestions
Query: ?focus_areas=clarity,engagement
Response: { overall_score, strengths, weaknesses, suggestions[] }

GET /api/export/script/{script_id}/draft
Response: ScriptDraft (å®Œæ•´è‰ç¨¿å†…å®¹)
```

**å…³é”®æ”¹è¿›ç‚¹ï¼ˆäºŒæ¬¡ç¼–è¾‘ï¼‰**:
1. âœ… **è‰ç¨¿è‡ªåŠ¨ä¿å­˜**: ç”¨æˆ·ç¼–è¾‘æ—¶è‡ªåŠ¨ä¿å­˜ï¼ˆdebounce 2ç§’ï¼‰
2. âœ… **åˆ†ç« èŠ‚ç¼–è¾‘**: intro/body/conclusionç‹¬ç«‹ç¼–è¾‘å’Œæ¶¦è‰²
3. âœ… **AIæ”¹è¿›å»ºè®®**: ä¸ç›´æ¥ä¿®æ”¹ï¼Œè€Œæ˜¯æä¾›å»ºè®®åˆ—è¡¨ä¾›ç”¨æˆ·é€‰æ‹©
4. âœ… **å¿«é€Ÿæ¶¦è‰²æ¨¡æ¿**: é¢„è®¾å¸¸è§çš„æ¶¦è‰²éœ€æ±‚ï¼ˆå¢åŠ æ•°æ®ã€å¢åŠ ç±»æ¯”ç­‰ï¼‰
5. âœ… **å˜æ›´è¿½è¸ª**: æ¶¦è‰²åæ˜¾ç¤ºä¿®æ”¹æ‘˜è¦ï¼Œç”¨æˆ·å¯å¯¹æ¯”æŸ¥çœ‹
6. âœ… **ç‰ˆæœ¬ç®¡ç†**: æ¯æ¬¡ä¿å­˜å¢åŠ ç‰ˆæœ¬å·ï¼Œå¯å›æº¯å†å²ç‰ˆæœ¬

---

**APIç«¯ç‚¹ï¼ˆæµå¼ç”Ÿæˆï¼‰**:
```
POST /api/export/script-stream
Body: {
  nodes, edges, duration,
  options: {
    tone: "professional" | "casual",
    audience: "executive" | "technical",
    focus_areas: ["scalability"]
  }
}
Response: text/event-stream (SSE)

Event stream:
data: {"type": "CONTEXT_FOUND", "data": {...}}

data: {"type": "TOKEN", "data": {"token": "..."}}

data: {"type": "COMPLETE", "data": {"script": "...", "sources": [...]}}
```

---

### æ–¹æ¡ˆ4: å‰ç«¯é›†æˆ

**æ–‡ä»¶**: `frontend/components/EnhancedExportMenu.tsx` (æ–°å»º)

**ç”¨æˆ·ä½“éªŒæµç¨‹**:

1. **RAGä¸Šä¸‹æ–‡é¢„è§ˆ**ï¼ˆåœ¨å¯¼å‡ºå‰ï¼‰
   ```tsx
   const previewRAGContext = async () => {
     const response = await fetch('/api/rag/preview', {
       method: 'POST',
       body: JSON.stringify({
         nodes, edges,
         query: `Architecture export: ${summarizeArchitecture(nodes, edges)}`
       })
     });

     const context = await response.json();
     setContextPreview(context);
   };

   // UIæ˜¾ç¤º
   {contextPreview && (
     <div className="context-preview-panel">
       <h3>æ‰¾åˆ° {contextPreview.chunks_found} ä¸ªç›¸å…³æ–‡æ¡£</h3>
       <ul>
         {contextPreview.patterns.map(pattern => (
           <li key={pattern}>{pattern}</li>
         ))}
       </ul>
       <div className="source-badges">
         {contextPreview.sources.map(source => (
           <span className="badge">{source}</span>
         ))}
       </div>
     </div>
   )}
   ```

2. **é…ç½®å¯¼å‡ºé€‰é¡¹**
   ```tsx
   <div className="export-options">
     <label>å—ä¼—çº§åˆ«</label>
     <select value={ragOptions.audienceLevel}>
       <option value="executive">é«˜ç®¡ï¼ˆé«˜å±‚æ¦‚è§ˆï¼‰</option>
       <option value="technical">æŠ€æœ¯äººå‘˜ï¼ˆè¯¦ç»†ï¼‰</option>
       <option value="mixed">æ··åˆå—ä¼—</option>
     </select>

     <label>é‡ç‚¹é¢†åŸŸ</label>
     <MultiSelect
       options={['å¯æ‰©å±•æ€§', 'å®‰å…¨æ€§', 'æˆæœ¬', 'æ€§èƒ½']}
       value={ragOptions.focusAreas}
     />
   </div>
   ```

3. **æµå¼æ¼”è®²ç¨¿ç”Ÿæˆï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰**
   ```tsx
   const generateScriptStream = async (duration: string) => {
     const response = await fetch('/api/export/script-stream', {
       method: 'POST',
       headers: { 'Accept': 'text/event-stream' },
       body: JSON.stringify({ nodes, edges, duration, options: ragOptions })
     });

     const reader = response.body!.getReader();
     const decoder = new TextDecoder();

     while (true) {
       const { done, value } = await reader.read();
       if (done) break;

       const chunk = decoder.decode(value);
       const lines = chunk.split('\n\n');

       for (const line of lines) {
         if (!line.startsWith('data: ')) continue;

         const event = JSON.parse(line.slice(6));

         if (event.type === 'TOKEN') {
           // æ‰“å­—æœºæ•ˆæœ
           setScript(prev => prev + event.data.token);
         } else if (event.type === 'COMPLETE') {
           setFinalScript(event.data.script);
           showSourcesModal(event.data.rag_sources);
         }
       }
     }
   };
   ```

---

### æ–¹æ¡ˆ5: é«˜çº§åŠŸèƒ½ - å¤šæ¨¡æ€å›¾è¡¨ç”Ÿæˆ

**æ–‡ä»¶**: `backend/app/services/chart_generator.py` (æ–°å»º)

åŸºäºChartLlamaç ”ç©¶ï¼Œä½¿ç”¨AIç”Ÿæˆæ€§èƒ½å¯¹æ¯”å›¾è¡¨ï¼š

```python
class MultimodalChartGenerator:
    async def generate_performance_chart(component: Node, rag_context):
        # ä»RAGæå–æ€§èƒ½æŒ‡æ ‡
        metrics = extract_metrics_from_rag(rag_context)

        # AIç”Ÿæˆå›¾è¡¨é…ç½®
        prompt = f"""
ä¸º{component.data.label}ç”Ÿæˆæ€§èƒ½å¯¹æ¯”å›¾è¡¨ã€‚

åŸºå‡†æ•°æ®ï¼ˆæ¥è‡ªRAGï¼‰:
{format_metrics(metrics)}

ç”ŸæˆJSON:
{{
  "chart_type": "bar" | "line",
  "data": {{"labels": [...], "datasets": [...]}},
  "options": {{"title": "...", "scales": {{...}}}}
}}
"""

        chart_json = await ai.generate(prompt)

        # ç”¨matplotlibç”Ÿæˆå›¾è¡¨å›¾ç‰‡
        fig, ax = plt.subplots(figsize=(8, 6))
        # ... ç»˜åˆ¶å›¾è¡¨ ...

        # åµŒå…¥PPTå¹»ç¯ç‰‡
        slide.shapes.add_picture(img_stream, ...)
```

---

## å®æ–½è·¯çº¿å›¾ï¼ˆåŸºäºç”¨æˆ·åé¦ˆè°ƒæ•´ï¼‰

### Phase 1: ä¸“ä¸šæ¼”è®²ç¨¿ç”Ÿæˆç³»ç»Ÿ (Week 1-2)
**ä¼˜å…ˆçº§**: ğŸ”´ æœ€é«˜ï¼ˆç”¨æˆ·æ ¸å¿ƒç—›ç‚¹ï¼‰

**ä»»åŠ¡**:
1. åˆ›å»º `backend/app/services/speech_script_rag.py`
   - å®ç° `ProfessionalPromptBuilder` ç±»ï¼ˆCO-STARæ¡†æ¶ï¼‰
   - å®ç°æµå¼ç”Ÿæˆpipeline
   - æ„å»ºä¸‰ç§æ—¶é•¿çš„ä¸“ä¸špromptæ¨¡æ¿
   - æ·»åŠ RAGä¸Šä¸‹æ–‡é›†æˆ

2. åˆ›å»º `backend/app/services/script_editor.py`
   - å®ç°è‰ç¨¿ä¿å­˜å’ŒåŠ è½½
   - å®ç°åˆ†ç« èŠ‚æ¶¦è‰²åŠŸèƒ½
   - å®ç°AIæ”¹è¿›å»ºè®®ç”Ÿæˆ

3. æ›´æ–° `backend/app/api/export.py`
   - æ·»åŠ  `POST /api/export/script-stream` (æµå¼ç”Ÿæˆ)
   - æ·»åŠ  `PUT /api/export/script/{id}/draft` (ä¿å­˜è‰ç¨¿)
   - æ·»åŠ  `POST /api/export/script/{id}/refine` (æ¶¦è‰²)
   - æ·»åŠ  `GET /api/export/script/{id}/suggestions` (æ”¹è¿›å»ºè®®)

4. å‰ç«¯ç»„ä»¶å¼€å‘
   - åˆ›å»º `frontend/components/ScriptGenerator.tsx` (ç”Ÿæˆç•Œé¢)
   - åˆ›å»º `frontend/components/ScriptEditor.tsx` (ç¼–è¾‘å™¨)
   - åˆ›å»º `frontend/components/RefineDialog.tsx` (æ¶¦è‰²å¯¹è¯æ¡†)

**éªŒè¯æ ‡å‡†**:
- [ ] ä½¿ç”¨CO-STARæ¡†æ¶çš„promptæ¨¡æ¿ç”Ÿæˆçš„æ¼”è®²ç¨¿ä¸“ä¸šåº¦è¯„åˆ† > 8/10
- [ ] ç”Ÿæˆçš„æ¼”è®²ç¨¿åŒ…å«è‡³å°‘2ä¸ªRAGæ¥æºçš„æ¡ˆä¾‹å¼•ç”¨
- [ ] äºŒæ¬¡ç¼–è¾‘åŠŸèƒ½å¯ç”¨ï¼Œæ¶¦è‰²åè´¨é‡æ˜æ˜¾æå‡
- [ ] æµå¼ä¼ è¾“æµç•…ï¼Œé¦–tokenå»¶è¿Ÿ < 3s

**äº¤ä»˜ç‰©**:
- åŠŸèƒ½å®Œæ•´çš„æ¼”è®²ç¨¿ç”Ÿæˆå’Œç¼–è¾‘ç³»ç»Ÿ
- æ”¯æŒ3ç§æ—¶é•¿ï¼ˆ30s/2min/5minï¼‰
- æ”¯æŒåˆ†ç« èŠ‚æ¶¦è‰²å’ŒAIæ”¹è¿›å»ºè®®

---

### Phase 2: RAGæœåŠ¡å¢å¼ºï¼ˆç®€åŒ–ç‰ˆï¼‰ (Week 2-3)
**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­ï¼ˆä¸ºPhase 1æä¾›æ›´å¥½æ”¯æŒï¼‰

**ä»»åŠ¡**:
1. åˆ›å»º `backend/app/services/rag_enhanced.py`
   - å®ç°ç®€åŒ–çš„å›¾ç‰¹å¾æå–ï¼ˆèŠ‚ç‚¹ç±»å‹ç»Ÿè®¡+è¾¹å¯†åº¦ï¼‰
   - å®ç°ä½™å¼¦ç›¸ä¼¼åº¦è®¡ç®—ï¼ˆæ— éœ€æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼‰
   - æ·»åŠ å…ƒæ•°æ®æå–å’Œè¿‡æ»¤

2. å¢å¼º `backend/app/services/rag.py`
   - æ·»åŠ æ–‡æ¡£ä¸Šä¼ æ—¶çš„è‡ªåŠ¨å…ƒæ•°æ®æå–
   - æ·»åŠ æŠ€æœ¯æ ˆè¯†åˆ«ï¼ˆä»æ–‡æ¡£å†…å®¹ï¼‰
   - æ·»åŠ å¤æ‚åº¦è¯„ä¼°

3. æ›´æ–° `backend/app/models/schemas.py`
   - æ·»åŠ  `SimpleGraphFeatures` æ¨¡å‹
   - æ·»åŠ  `DocumentMetadata` æ¨¡å‹

**éªŒè¯æ ‡å‡†**:
- [ ] ç®€åŒ–çš„ç»“æ„ç›¸ä¼¼åº¦æœç´¢å‡†ç¡®ç‡ > 70%
- [ ] å…ƒæ•°æ®è¿‡æ»¤å‡†ç¡®ç‡ > 85%
- [ ] RAGæŸ¥è¯¢å»¶è¿Ÿ < 2sï¼ˆé¦–æ¬¡ï¼‰, < 500msï¼ˆç¼“å­˜ï¼‰

---

### Phase 3: RAGé©±åŠ¨PPTç”Ÿæˆ (Week 4-5)
**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­ï¼ˆåœ¨æ¼”è®²ç¨¿åŸºç¡€ä¸Šæ‰©å±•ï¼‰

**ä»»åŠ¡**:
1. åˆ›å»º `backend/app/services/ppt_exporter_rag.py`
   - å®ç°å†…å®¹è§„åˆ’é˜¶æ®µï¼ˆRAGæŸ¥è¯¢ï¼‰
   - å®ç°å¹»ç¯ç‰‡å™è¿°å¢å¼º
   - æ·»åŠ æ¥æºå¼•ç”¨å’Œæœ€ä½³å®è·µæ³¨é‡Š

2. æ›´æ–° `backend/app/api/export.py`
   - æ·»åŠ  `POST /api/export/ppt-enhanced` ç«¯ç‚¹
   - æ·»åŠ  `POST /api/rag/preview` ç«¯ç‚¹ï¼ˆä¸Šä¸‹æ–‡é¢„è§ˆï¼‰

3. å‰ç«¯ç»„ä»¶
   - æ›´æ–° `ExportMenu` æ·»åŠ RAGå¢å¼ºé€‰é¡¹
   - åˆ›å»º `RAGContextPreview` ç»„ä»¶

**éªŒè¯æ ‡å‡†**:
- [ ] ç”Ÿæˆçš„PPTåŒ…å«RAGæ¥æºçš„æœ€ä½³å®è·µ
- [ ] æ¼”è®²è€…æ³¨é‡Šå«é¢†åŸŸçŸ¥è¯†
- [ ] é¡µè„šæ˜¾ç¤ºæ¥æºå¼•ç”¨

---

### Phase 4: å‰ç«¯å…¨é¢é›†æˆ (Week 6)
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜ï¼ˆå®Œæ•´ç”¨æˆ·ä½“éªŒï¼‰

**ä»»åŠ¡**:
1. é›†æˆæ‰€æœ‰åç«¯åŠŸèƒ½åˆ°ç»Ÿä¸€çš„UI
2. ä¼˜åŒ–æµå¼ä½“éªŒï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰
3. æ·»åŠ æ¥æºå¼•ç”¨å±•ç¤º
4. æ·»åŠ æ¼”è®²ç¨¿å†å²ç‰ˆæœ¬ç®¡ç†

**éªŒè¯æ ‡å‡†**:
- [ ] å®Œæ•´çš„ç”Ÿæˆâ†’ç¼–è¾‘â†’å¯¼å‡ºå·¥ä½œæµ
- [ ] æ‰“å­—æœºæ•ˆæœæµç•…ï¼ˆæ— å¡é¡¿ï¼‰
- [ ] ç”¨æˆ·ä½“éªŒè¯„åˆ† > 4/5

---

### Phase 5: é«˜çº§åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰ (Week 7+)
**ä¼˜å…ˆçº§**: ğŸŸ¢ ä½ï¼ˆNice-to-haveï¼‰

**ä»»åŠ¡**:
- Slidev RAGå¢å¼º
- å¤šæ¨¡æ€å›¾è¡¨ç”Ÿæˆ
- A/Bæµ‹è¯•ä¸åŒpromptæ¨¡æ¿
- å¯¼å‡ºåˆ†æä»ªè¡¨æ¿

---

## è°ƒæ•´è¯´æ˜ï¼ˆåŸºäºç”¨æˆ·åé¦ˆï¼‰

**ç›¸æ¯”åŸè®¡åˆ’çš„ä¸»è¦è°ƒæ•´**:

1. **ä¼˜å…ˆçº§é‡æ’**:
   - âœ… æ¼”è®²ç¨¿ç”Ÿæˆä»Week 5æå‰åˆ°Week 1ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
   - âœ… å›¾ç›¸ä¼¼åº¦ç®€åŒ–ï¼Œä»å¤æ‚çš„å›¾åµŒå…¥æ”¹ä¸ºç®€å•ç»Ÿè®¡ç‰¹å¾
   - âœ… PPTç”Ÿæˆå»¶ååˆ°Week 4ï¼ˆåœ¨æ¼”è®²ç¨¿éªŒè¯æˆåŠŸåï¼‰

2. **åŠŸèƒ½å¢å¼º**:
   - âœ… æ–°å¢ä¸“ä¸šPromptæ¨¡æ¿ç³»ç»Ÿï¼ˆCO-STARæ¡†æ¶ï¼‰
   - âœ… æ–°å¢äºŒæ¬¡ç¼–è¾‘å’Œæ¶¦è‰²åŠŸèƒ½ï¼ˆç”¨æˆ·æ˜ç¡®éœ€æ±‚ï¼‰
   - âœ… æ–°å¢AIæ”¹è¿›å»ºè®®ï¼ˆè€Œéç›´æ¥ä¿®æ”¹ï¼‰

3. **æŠ€æœ¯ç®€åŒ–**:
   - âœ… å›¾ç›¸ä¼¼åº¦ä¸ç”¨NetworkXå’Œå›¾åµŒå…¥ï¼Œç”¨ç®€å•ç»Ÿè®¡ç‰¹å¾
   - âœ… ä¿æŒå¤šprovideræ¶æ„ï¼ˆä¸å›ºå®šæŸä¸ªproviderï¼‰
   - âœ… åˆ†é˜¶æ®µäº¤ä»˜ï¼Œå¿«é€ŸéªŒè¯æ•ˆæœ

**é¢„æœŸå·¥æœŸ**: 5-6å‘¨æ ¸å¿ƒåŠŸèƒ½ï¼Œ7+å‘¨å®Œæ•´åŠŸèƒ½

---

## æŠ€æœ¯å¯è¡Œæ€§è¯„ä¼°

### âœ… é«˜å¯è¡Œæ€§
- **RAGæ··åˆæ£€ç´¢**: ChromaDBæ”¯æŒå…ƒæ•°æ®è¿‡æ»¤ï¼ŒNetworkXæˆç†Ÿ
- **æ–‡æœ¬å™è¿°å¢å¼º**: æç¤ºè¯å·¥ç¨‹ï¼Œæ— æŠ€æœ¯é—¨æ§›
- **æµå¼API**: FastAPIåŸç”Ÿæ”¯æŒSSE
- **å‰ç«¯é›†æˆ**: React + Zustandå·²æœ‰ç±»ä¼¼æ¨¡å¼

### âš ï¸ ä¸­ç­‰å¯è¡Œæ€§
- **å›¾ç›¸ä¼¼åº¦æœç´¢**: éœ€è¦å›¾åµŒå…¥æ¨¡å‹ï¼ˆå¯ç”¨graph2vecæˆ–ç®€åŒ–ä¸ºç‰¹å¾å‘é‡ï¼‰
- **å¤šæ¨¡æ€å›¾è¡¨ç”Ÿæˆ**: éœ€è¦AI+matplotlibåè°ƒï¼ˆå¯é™çº§ä¸ºçº¯matplotlibï¼‰
- **Reranking**: Cross-encoderæ¨ç†è¾ƒæ…¢ï¼ˆå¯ç¼“å­˜ç»“æœï¼‰

### âš¡ é£é™©ç‚¹
- **RAGæŸ¥è¯¢å»¶è¿Ÿ**: é¦–æ¬¡æŸ¥è¯¢26sï¼ˆç¼“è§£ï¼šé¢„çƒ­+ç¼“å­˜ï¼‰
- **æµå¼ä¼ è¾“ä¸­æ–­**: ç½‘ç»œé—®é¢˜ï¼ˆç¼“è§£ï¼šæ–­ç‚¹ç»­ä¼ ï¼‰
- **AIå¹»è§‰**: RAGä¸Šä¸‹æ–‡ä¸ç›¸å…³ï¼ˆç¼“è§£ï¼šç›¸å…³æ€§é˜ˆå€¼è¿‡æ»¤ï¼‰

---

## æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### RAGæŸ¥è¯¢ä¼˜åŒ–
```python
# æŸ¥è¯¢ç¼“å­˜ï¼ˆRedisï¼‰
@cached(ttl=3600, key_prefix="rag:search")
async def cached_hybrid_search(query: str):
    return await rag.hybrid_search(query)

# å¹¶è¡ŒæŸ¥è¯¢
async def parallel_rag_queries(queries: List[str]):
    tasks = [rag.hybrid_search(q) for q in queries]
    return await asyncio.gather(*tasks)
```

### æµå¼ä¼ è¾“ä¼˜åŒ–
```python
# Tokenç¼“å†²ï¼ˆé¿å…ç½‘ç»œæŠ–åŠ¨ï¼‰
BUFFER_SIZE = 10
token_buffer = []

async for token in ai_stream:
    token_buffer.append(token)
    if len(token_buffer) >= BUFFER_SIZE:
        yield "".join(token_buffer)
        token_buffer.clear()
```

---

## è´¨é‡ä¿è¯æ ‡å‡†

### ä¸“ä¸šæ€§æŒ‡æ ‡
- âœ… PPTåŒ…å«è‡³å°‘3ä¸ªRAGæ¥æºçš„æœ€ä½³å®è·µ
- âœ… æ¼”è®²ç¨¿å¼•ç”¨è‡³å°‘2ä¸ªå…·ä½“æ¡ˆä¾‹ï¼ˆæ¥è‡ªRAGï¼‰
- âœ… æ‰€æœ‰æ–­è¨€éƒ½æœ‰æ¥æºå¼•ç”¨

### å‡†ç¡®æ€§æŒ‡æ ‡
- âœ… RAGæ£€ç´¢ç›¸å…³æ€§ > 0.7ï¼ˆåŸºäºäººå·¥è¯„ä¼°ï¼‰
- âœ… ç”Ÿæˆå†…å®¹ä¸æ¶æ„å›¾ä¸€è‡´æ€§ > 95%
- âœ… æ— æ˜æ˜¾AIå¹»è§‰ï¼ˆç”±RAGä¸Šä¸‹æ–‡çº¦æŸï¼‰

### å¯ç”¨æ€§æŒ‡æ ‡
- âœ… PPTå¯¼å‡ºæ—¶é—´ < 30s
- âœ… æ¼”è®²ç¨¿ç”Ÿæˆé¦–tokenå»¶è¿Ÿ < 3s
- âœ… æµå¼ä¼ è¾“æ— æ˜æ˜¾å¡é¡¿ï¼ˆå¸§ç‡ > 10 token/sï¼‰

---

## å…³é”®æ–‡ä»¶è·¯å¾„

### åç«¯æ ¸å¿ƒæ–‡ä»¶
- `D:\file\openproject\SmartArchitect\backend\app\services\rag.py` - ç°æœ‰RAGæœåŠ¡ï¼ˆéœ€å¢å¼ºï¼‰
- `D:\file\openproject\SmartArchitect\backend\app\services\rag_enhanced.py` - å¢å¼ºRAGæœåŠ¡ï¼ˆæ–°å»ºï¼‰
- `D:\file\openproject\SmartArchitect\backend\app\services\ppt_exporter_rag.py` - RAGé©±åŠ¨PPTï¼ˆæ–°å»ºï¼‰
- `D:\file\openproject\SmartArchitect\backend\app\services\speech_script_rag.py` - æµå¼æ¼”è®²ç¨¿ï¼ˆæ–°å»ºï¼‰
- `D:\file\openproject\SmartArchitect\backend\app\services\ai_vision.py` - AIæœåŠ¡ï¼ˆéœ€å¢å¼ºï¼‰
- `D:\file\openproject\SmartArchitect\backend\app\api\export.py` - å¯¼å‡ºAPIï¼ˆéœ€æ‰©å±•ï¼‰
- `D:\file\openproject\SmartArchitect\backend\app\models\schemas.py` - æ•°æ®æ¨¡å‹ï¼ˆéœ€æ‰©å±•ï¼‰

### å‰ç«¯æ ¸å¿ƒæ–‡ä»¶
- `D:\file\openproject\SmartArchitect\frontend\components\ExportMenu.tsx` - ç°æœ‰å¯¼å‡ºèœå•ï¼ˆéœ€æ›¿æ¢ï¼‰
- `D:\file\openproject\SmartArchitect\frontend\components\EnhancedExportMenu.tsx` - å¢å¼ºå¯¼å‡ºèœå•ï¼ˆæ–°å»ºï¼‰
- `D:\file\openproject\SmartArchitect\frontend\components\RAGContextPreview.tsx` - ä¸Šä¸‹æ–‡é¢„è§ˆï¼ˆæ–°å»ºï¼‰
- `D:\file\openproject\SmartArchitect\frontend\components\ScriptGeneratorStream.tsx` - æµå¼è„šæœ¬ï¼ˆæ–°å»ºï¼‰
- `D:\file\openproject\SmartArchitect\frontend\lib\store\useArchitectStore.ts` - å…¨å±€çŠ¶æ€ï¼ˆéœ€æ‰©å±•ï¼‰

---

## å‚è€ƒèµ„æ–™

æŠ€æœ¯æ–¹æ¡ˆåŸºäºä»¥ä¸‹2025-2026å‰æ²¿ç ”ç©¶å’Œæœ€ä½³å®è·µï¼š

### RAGä¸æ¼”ç¤ºæ–‡ç¨¿ç”Ÿæˆ
- [Mastering PowerPoint Creation with RAG-Powered Automation](https://abxda.medium.com/mastering-powerpoint-creation-with-rag-powered-automation-in-google-colab-e3499015d6d6) - RAG-powered presentation automationå®è·µ
- [AI Presentation Makers 2026](https://www.slidesai.io/blog/best-ai-presentation-makers) - Tome/Gammaç­‰AIå·¥å…·çš„è®¾è®¡æ¨¡å¼
- [Architecture Project Presentation Guide](https://slidemodel.com/architecture-project-presentation/) - æ¶æ„æ¼”ç¤ºæœ€ä½³å®è·µ

### Prompt Engineeringæœ€ä½³å®è·µï¼ˆ2025-2026ï¼‰
- [IBM's 2026 Guide to Prompt Engineering](https://www.ibm.com/think/prompt-engineering) - ä¼ä¸šçº§promptå·¥ç¨‹æŒ‡å—ï¼Œå¼ºè°ƒcontext engineering
- [Lakera's Ultimate Prompt Engineering Guide 2025](https://www.lakera.ai/blog/prompt-engineering-guide) - CO-STARæ¡†æ¶å’Œrole-based prompting
- [7 Prompt Engineering Templates That Work](https://dextralabs.com/blog/prompt-engineering-templates/) - ç”Ÿäº§çº§promptæ¨¡æ¿
- [Prompt Engineering Best Practices 2025](https://garrettlanders.com/prompt-engineering-guide-2025/) - ä¼ä¸šå®æ–½67%ç”Ÿäº§åŠ›æå‡æ¡ˆä¾‹

### å¤šæ¨¡æ€AIä¸å›¾è¡¨ç”Ÿæˆ
- [ChartLlama: Multimodal LLM for Chart Generation](https://tingxueronghua.github.io/ChartLlama/) - å›¾è¡¨ç†è§£ä¸ç”Ÿæˆ
- [Multimodal AI Models 2026](https://www.bentoml.com/blog/multimodal-ai-a-guide-to-open-source-vision-language-models) - Claude 4/GPT-4Vèƒ½åŠ›åˆ†æ
- [LLM Visualization 2025](https://ai2.work/technology/ai-tech-llm-visualization-2025/) - å¯è§†åŒ–æœ€ä½³å®è·µå’Œæœªæ¥æ–¹å‘

### æŠ€æœ¯æ¼”è®²ä¸è¡¨è¾¾
- [Architecture Presentation to Clients](https://wonderslide.com/blog/presenting-an-architectural-project-to-clients/) - å®¢æˆ·æ¼”ç¤ºçš„5ä¸ªå…³é”®è¦ç´ 
- [Successful Architecture Project Presentation Tips](https://www.re-thinkingthefuture.com/rtf-fresh-perspectives/a1265-10-tips-to-make-successful-architecture-project-presentation/) - 10ä¸ªæˆåŠŸæ¼”ç¤ºæŠ€å·§

---

## éªŒæ”¶æ ‡å‡†

### æœ€ç»ˆäº¤ä»˜ç‰©
1. å¢å¼ºå‹RAGæœåŠ¡ï¼ˆæ”¯æŒæ··åˆæ£€ç´¢ï¼‰
2. RAGé©±åŠ¨PPTç”Ÿæˆå™¨ï¼ˆ6-8å¼ ä¸“ä¸šå¹»ç¯ç‰‡ï¼‰
3. æµå¼æ¼”è®²ç¨¿ç”Ÿæˆå™¨ï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰
4. å‰ç«¯å®Œæ•´é›†æˆï¼ˆä¸Šä¸‹æ–‡é¢„è§ˆ+é…ç½®UIï¼‰
5. å®Œæ•´çš„APIæ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹

### æ•ˆæœéªŒè¯
- [ ] ç”Ÿæˆçš„PPTåŒ…å«é¢†åŸŸçŸ¥è¯†ï¼ˆéç©ºæ´æ¨¡æ¿ï¼‰
- [ ] æ¼”è®²ç¨¿å¼•ç”¨å…·ä½“æ¡ˆä¾‹ï¼ˆæ¥è‡ªRAGï¼‰
- [ ] æ‰€æœ‰æ¥æºå¯è¿½æº¯ï¼ˆå¼•ç”¨æ ‡æ³¨ï¼‰
- [ ] ç”¨æˆ·åé¦ˆä¸“ä¸šæ€§è¯„åˆ† > 8/10
- [ ] æŠ€æœ¯å›¢é˜Ÿè¯„ä¼°å¯ç”¨æ€§ > 85%

---

## æ€»ç»“

è¿™æ˜¯ä¸€ä¸ª**ç”Ÿäº§çº§**çš„RAGæ·±åº¦é›†æˆæ–¹æ¡ˆï¼Œä¸æ˜¯ç©å…·çº§åˆ«çš„demoã€‚æ ¸å¿ƒåˆ›æ–°ï¼š

1. **æ··åˆæ£€ç´¢** - ä¸ä»…è¯­ä¹‰åŒ¹é…ï¼Œè¿˜åŒ¹é…æ¶æ„ç»“æ„
2. **å¤šé˜¶æ®µç”Ÿæˆ** - ä»è§„åˆ’åˆ°å™è¿°åˆ°è§†è§‰çš„å®Œæ•´ç®¡é“
3. **æ¥æºå¯è¿½æº¯** - æ‰€æœ‰æ–­è¨€éƒ½æœ‰RAGæ¥æºå¼•ç”¨
4. **æµå¼ä½“éªŒ** - å®æ—¶åé¦ˆï¼Œæ— éœ€é•¿æ—¶é—´ç­‰å¾…
5. **è‡ªé€‚åº”æ·±åº¦** - æ ¹æ®å—ä¼—è°ƒæ•´æŠ€æœ¯æ·±åº¦

åŸºäºPaper2Slidesã€ChartLlamaç­‰2025-2026å‰æ²¿ç ”ç©¶ï¼Œç»“åˆSmartArchitectç°æœ‰çš„ReactFlowå’ŒExcalidrawèƒ½åŠ›ï¼Œå¯å®ç°è¶…è¶Šå¸‚é¢ä¸Šé€šç”¨å·¥å…·çš„ä¸“ä¸šæ•ˆæœã€‚
